(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var s=n(4),c=n.n(s),a=n(2),o=n(1),i=(n(9),n(10),n(11),n(0)),r=function(t){var e=t.posts,n=t.setSelectedPostId,s=t.selectedPostId;return Object(i.jsxs)("div",{className:"PostsList",children:[Object(i.jsx)("h2",{children:"Posts:"}),Object(i.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:e.map((function(t){return Object(i.jsxs)("li",{className:"PostsList__item",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("b",{children:"[User #".concat(t.userId,"]: ")}),t.title]}),Object(i.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return e=t.id,void n(s===e?null:e);var e},children:s===t.id?"Close":"Open"})]},t.id)}))})]})},l="https://mate.academy/students-api",u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(l).concat(t),e).then((function(t){if(!t.ok)throw new Error("".concat(t.status," - ").concat(t.statusText));return t.json()}))},j=function(){return u("/posts")};n(13);var d=function(t){var e=t.selectedPostId,n=t.loadComments,s=Object(o.useState)(""),c=Object(a.a)(s,2),r=c[0],l=c[1],j=Object(o.useState)(""),d=Object(a.a)(j,2),m=d[0],b=d[1],h=Object(o.useState)(""),O=Object(a.a)(h,2),p=O[0],f=O[1],x=function(t){return u("/comments?postId=".concat(t),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({name:r,email:m,body:p,postId:t})}).then((function(){n(),l(""),b(""),f("")}))};return Object(i.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){t.preventDefault(),x(e)},children:[Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:r,onChange:function(t){return l(t.target.value)}})}),Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("input",{type:"email",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:m,onChange:function(t){return b(t.target.value)}})}),Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:p,onChange:function(t){return f(t.target.value)}})}),Object(i.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},m=(n(14),function(t){var e=t.selectedPostId,n=Object(o.useState)(!0),s=Object(a.a)(n,2),c=s[0],r=s[1],l=Object(o.useState)(null),j=Object(a.a)(l,2),m=j[0],b=j[1],h=Object(o.useState)([]),O=Object(a.a)(h,2),p=O[0],f=O[1],x=function(){var t;(t=e,u("/comments?postId=".concat(t))).then((function(t){return f(t)}))};return Object(o.useEffect)((function(){var t;(t=e,u("/posts/".concat(t))).then((function(t){return b(t)})),x()}),[e]),Object(i.jsxs)("div",{className:"PostDetails",children:[Object(i.jsx)("h2",{children:"Post details:"}),Object(i.jsx)("section",{className:"PostDetails__post",children:m&&Object(i.jsx)("p",{children:m.title})}),Object(i.jsxs)("section",{className:"PostDetails__comments","data-cy":"postList",children:[Object(i.jsx)("button",{type:"button",className:"button",onClick:function(){return r(!c)},children:c?"Hide comments":"Show comments"}),c&&Object(i.jsxs)("ul",{className:"PostDetails__list",children:[p.map((function(t){return Object(i.jsxs)("li",{className:"PostDetails__list-item",children:[Object(i.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return e=t.id,u("/comments/".concat(e),{method:"DELETE"}).then((function(){return x()}));var e},children:"X"}),Object(i.jsx)("p",{children:t.body})]},t.id)})),0===p.length&&"No comments yet"]})]}),Object(i.jsx)("section",{children:Object(i.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(i.jsx)(d,{selectedPostId:e,loadComments:x})})})]})}),b=function(){var t=Object(o.useState)(0),e=Object(a.a)(t,2),n=e[0],s=e[1],c=Object(o.useState)([]),l=Object(a.a)(c,2),d=l[0],b=l[1],h=Object(o.useState)([]),O=Object(a.a)(h,2),p=O[0],f=O[1],x=Object(o.useState)(null),_=Object(a.a)(x,2),v=_[0],N=_[1];return Object(o.useEffect)((function(){j().then((function(t){return b(t)})),u("/users").then((function(t){return f(t)}))}),[]),Object(o.useMemo)((function(){var t;0===n?j().then((function(t){return b(t)})):(t=n,u("/posts?userId=".concat(t))).then((function(t){return b(t)}))}),[n]),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("header",{className:"App__header",children:Object(i.jsxs)("label",{children:["Select a user: \xa0",Object(i.jsxs)("select",{className:"App__user-selector",value:n,onChange:function(t){s(+t.target.value),N(null)},children:[Object(i.jsx)("option",{value:"0",children:"All users"}),p.map((function(t){return Object(i.jsx)("option",{value:t.id,children:t.name},t.id)}))]})]})}),Object(i.jsxs)("main",{className:"App__main",children:[Object(i.jsx)("div",{className:"App__sidebar",children:Object(i.jsx)(r,{posts:d,setSelectedPostId:function(t){return N(t)},selectedPostId:v})}),Object(i.jsx)("div",{className:"App__content",children:v&&Object(i.jsx)(m,{selectedPostId:v})})]})]})};c.a.render(Object(i.jsx)(b,{}),document.getElementById("root"))}],[[15,1,2]]]);
//# sourceMappingURL=main.239705e7.chunk.js.map